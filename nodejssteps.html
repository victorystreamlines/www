<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>مشّيها علي — Node.js + React + TypeScript</title>
  <style>
    :root{
      --bg:#0b1020;--panel:#121936;--ink:#eaf2ff;--muted:#a9b7ff;--accent:#7c5cff;--accent2:#22d3ee;--good:#22c55e;--warn:#f59e0b;--bad:#ef4444;
      --glow:0 0 0px rgba(124,92,255,0.0), 0 0 20px rgba(124,92,255,0.25), 0 0 40px rgba(34,211,238,0.15);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 800px at 80% -10%, rgba(124,92,255,.15), transparent), radial-gradient(900px 700px at 10% 110%, rgba(34,211,238,.12), transparent), var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",sans-serif;}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg, rgba(11,16,32,.9), rgba(11,16,32,.6));backdrop-filter:saturate(1.3) blur(8px);border-bottom:1px solid rgba(124,92,255,.25)}
    .wrap{max-width:1200px;margin:auto;padding:16px}
    .title{display:flex;align-items:center;gap:12px}
    .logo{width:42px;height:42px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:var(--glow)}
    .logo svg{filter:drop-shadow(0 4px 14px rgba(124,92,255,.4))}
    .subtitle{color:var(--muted);font-size:14px}

    .layout{display:grid;grid-template-columns:280px 1fr;gap:16px;max-width:1200px;margin:22px auto;padding:0 16px}
    nav{position:sticky;top:74px;height:calc(100vh - 90px);overflow:auto;padding:12px;background:rgba(18,25,54,.6);border:1px solid rgba(124,92,255,.2);border-radius:16px}
    nav .sec{display:flex;flex-direction:column;gap:8px}
    .link{padding:10px 12px;border-radius:12px;color:var(--ink);text-decoration:none;border:1px solid transparent;display:flex;align-items:center;gap:10px}
    .link:hover{background:rgba(124,92,255,.12);border-color:rgba(124,92,255,.25)}
    .active{background:linear-gradient(135deg, rgba(124,92,255,.22), rgba(34,211,238,.12));border-color:rgba(124,92,255,.35);box-shadow:var(--glow)}

    main{display:flex;flex-direction:column;gap:18px}
    .card{background:linear-gradient(180deg, rgba(18,25,54,.9), rgba(18,25,54,.75));border:1px solid rgba(124,92,255,.25);border-radius:18px;overflow:hidden}
    .card .hdr{display:flex;align-items:center;gap:12px;padding:14px 16px;border-bottom:1px dashed rgba(124,92,255,.3)}
    .badge{font-size:12px;background:rgba(124,92,255,.25);border:1px solid rgba(124,92,255,.5);padding:4px 8px;border-radius:999px;color:#fff}
    .stepN{font-weight:700;font-feature-settings:"tnum" 1,"lnum" 1}
    .card .body{padding:16px;display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    .panel{background:rgba(10,14,28,.6);border:1px solid rgba(124,92,255,.2);border-radius:14px;padding:14px;position:relative}
    .panel h4{margin:0 0 6px 0;color:#fff}
    .panel p{margin:6px 0;color:var(--muted)}

    .btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .btn{cursor:pointer;background:linear-gradient(135deg, var(--accent), var(--accent2));border:none;color:white;padding:10px 14px;border-radius:12px;font-weight:600;box-shadow:var(--glow)}
    .btn.alt{background:transparent;border:1px solid rgba(124,92,255,.45)}

    .console{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:13px;line-height:1.5;background:#050814;border:1px solid rgba(124,92,255,.25);border-radius:12px;padding:12px;height:160px;overflow:auto;position:relative}
    .cursor{display:inline-block;width:8px;height:14px;background:#7c5cff;margin-left:2px;animation:blink 1s step-end infinite}
    @keyframes blink{50%{opacity:0}}
    .flash{position:absolute;inset:0;pointer-events:none}
    .flash::after{content:"";position:absolute;inset:0;background:radial-gradient(600px 200px at 50% -10%, rgba(124,92,255,.2), transparent);animation:shine 1.2s ease}
    @keyframes shine{from{opacity:.8}to{opacity:0}}

    .progress{height:8px;background:rgba(124,92,255,.2);border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg, var(--accent), var(--accent2));transition:width .6s ease}

    .tip{display:flex;gap:10px;align-items:flex-start;background:rgba(34,211,238,.12);border:1px solid rgba(34,211,238,.35);padding:10px 12px;border-radius:12px;color:#d9fbff}

    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid rgba(124,92,255,.4);border-radius:999px;font-size:12px;background:rgba(124,92,255,.12)}

    .footer{opacity:.8;text-align:center;padding:24px}

    /* confetti */
    .confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden}
    .piece{position:absolute;width:8px;height:14px;background:linear-gradient(180deg, var(--accent), var(--accent2));opacity:0.9;transform:rotate(20deg);border-radius:2px;animation:fall 1400ms cubic-bezier(.2,.7,.3,1) forwards}
    @keyframes fall{to{transform:translateY(110vh) rotate(360deg);opacity:0}}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <div class="logo" aria-hidden="true">
          <svg width="26" height="26" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M4 12c0-4.418 3.582-8 8-8a8 8 0 0 1 7.3 4.6" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
            <path d="M20 12c0 4.418-3.582 8-8 8a8 8 0 0 1-7.3-4.6" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
            <circle cx="12" cy="12" r="2.6" fill="#fff"/>
          </svg>
        </div>
        <div>
          <h1 style="margin:0">مشّيها علي — دليل تفاعلي لتشغيل مشاريع <span class="pill">Node.js</span> <span class="pill">React</span> <span class="pill">TypeScript</span></h1>
          <div class="subtitle">خطوة بخطوة — برومبتات جاهزة + شرح وش يصير خلف الكواليس، مع حركات تفتح النفس ✨</div>
        </div>
      </div>
    </div>
  </header>

  <div class="layout">
    <nav id="nav"></nav>
    <main id="main"></main>
  </div>

  <div class="footer">صُنِع بحب — للريس أبو طلال — علشان ما تمل 💙</div>
  <div class="confetti" id="confetti"></div>

<script>
// ======= بيانات الخطوات =======
const steps = [
  {
    id:"env",
    icon:"🧰",
    title:"تجهيز البيئة: Node LTS",
    badge:"مرة وحدة",
    prompt:"ثبّت Node.js LTS وتأكد من وجود node و npm في النظام.",
    behind:[
      "يضيف مشغّل JavaScript خارج المتصفح (V8) + مدير الحزم npm.",
      "يسمح بتشغيل أدوات التطوير مثل Vite/Next محليًا.",
      "لا نحتاج تثبيت React/TypeScript عالميًا — تجي محليًا في المشروع."
    ],
    tips:["لو تتعامل مع مشاريع كثيرة، استخدم nvm لإدارة نسخ Node."],
  },
  {
    id:"open",
    icon:"📂",
    title:"فتح المشروع الجاهز",
    badge:"Bolt/Cursor",
    prompt:"افتح مجلد المشروع في Cursor/المحرر وانتقل له.",
    behind:[
      "نخلي كل أوامر التشغيل/التثبيت تتم داخل نفس المجلد.",
      "المحرر يفعل تكاملات للـ linting/TypeScript حسب إعدادات المشروع."],
    tips:["اسم المجلد مهم لو فيه workspaces — خلك في الجذر الصحيح."]
  },
  {
    id:"read",
    icon:"📜",
    title:"تعرّف على سكربتات التشغيل",
    badge:"package.json",
    prompt:"افتح package.json وشوف scripts و dependencies وحدد نوع الستاك (Vite/Next/CRA).",
    behind:[
      "scripts تحدد أوامر مثل dev/start/build.",
      "dependencies توضح هل المشروع React + TypeScript ومع أي أداة بناء.",
      "الاختيار يحدد أمر التشغيل: Vite/Next = dev، و CRA = start."],
    tips:["لو لقيت vite → npm run dev. لو next → npm run dev. لو react-scripts → npm start."]
  },
  {
    id:"install",
    icon:"⬇️",
    title:"تنزيل الاعتمادات",
    badge:"npm install",
    prompt:"نزّل كل الحزم للمشروع.",
    behind:[
      "npm يقرأ package.json وينزل الحزم إلى node_modules.",
      "ينشئ/يحدّث package-lock.json لتثبيت الإصدارات.",
      "يجهّز باينريات الأدوات (vite/next/react-scripts) للاستخدام داخل scripts."],
    tips:["لو فيه مشاكل، نظّف node_modules وملف القفل وأعد التثبيت."]
  },
  {
    id:"run",
    icon:"🚀",
    title:"تشغيل خادم التطوير",
    badge:"dev server",
    prompt:"شغّل السيرفر المحلي حسب نوع الستاك.",
    behind:[
      "Vite/Next/CRA يبدؤون dev server على منفذ محلي (5173/3000).",
      "يترجم TypeScript إلى JS ويجمّع الموديولات.",
      "يفعل Hot Module Replacement للتحديث الفوري بدون إعادة تحميل كاملة."],
    tips:["لو المنفذ محجوز غيّره: Vite → --port، Next → PORT=4000 npm run dev."]
  },
  {
    id:"why",
    icon:"🧠",
    title:"ليش ما نشغّل index.html مباشرة؟",
    badge:"مهم",
    prompt:"افهم دور الباندلر/السيرفر ولماذا الدخول من dev server.",
    behind:[
      "dev server يحقن الـ assets ويحل الاستيرادات ESM.",
      "يترجم TypeScript/JSX ويطبق HMR.",
      "فتح index.html مباشرة يتجاوز كل السحر هذا وغالبًا يفشل الاستيراد."],
    tips:["index.html يصلح لمشاريع vanilla بسيطة فقط."]
  },
  {
    id:"edit",
    icon:"✍️",
    title:"عدّل واستمتع بالـ HMR",
    badge:"live",
    prompt:"حرّر ملفات src (مثلاً App.tsx) وشاهد التحديث فورًا.",
    behind:[
      "الـ dev server يراقب الملفات ويحدث الجزء المتأثر.",
      "تجربة فورية بدون فقدان الحالة غالبًا.",
      "بعض تغييرات الإعدادات تتطلب إعادة تشغيل."],
    tips:["تغيير vite.config أو إعدادات كبرى → أعد تشغيل السيرفر."]
  },
  {
    id:"typecheck",
    icon:"🛡️",
    title:"فحص الأنواع TypeScript",
    badge:"TS",
    prompt:"شغّل فحص الأنواع ذهنيًا وتأكد من السلامة الدلالية.",
    behind:[
      "الأداة (Vite/Next) تعمل type-check أثناء التطوير/البناء.",
      "الأخطاء الدلالية تمنع build في CI غالبًا.",
      "تحسين DX واكتشاف الأخطاء مبكرًا."],
    tips:["خطأ TS؟ صحّح التعاريف أو الأنواع في المكونات/الخدمات."]
  },
  {
    id:"build",
    icon:"🏗️",
    title:"بناء نسخة إنتاج",
    badge:"build",
    prompt:"ابنِ النسخة النهائية المضغوطة.",
    behind:[
      "Vite يخرج dist/ — Next يخرج .next/.",
      "Minify/Tree-shake/Code-split لتحسين الأداء.",
      "جاهزة للنشر على سيرفر/سِتاتيكس."],
    tips:["جرّب المعاينة المحلية قبل النشر."],
  },
  {
    id:"preview",
    icon:"👀",
    title:"معاينة الإنتاج محليًا",
    badge:"preview",
    prompt:"شغّل خادم معاينة للنسخة المبنية.",
    behind:[
      "يتأكد أن build يعمل بدون أدوات التطوير.",
      "يحاكي بيئة النشر بشكل أدق.",
      "يكشف مشاكل المسارات/الأصول قبل الرفع."],
    tips:["لو كل شيء تمام — مبروك! وقت النشر."],
  },
  {
    id:"trouble",
    icon:"🧯",
    title:"حلّ المشاكل الشائعة",
    badge:"سريع",
    prompt:"بدّل المنفذ، نظّف التثبيت، أو غيّر نسخة Node عند الحاجة.",
    behind:[
      "Port محجوز → اختر منفذ بديل.",
      "Install فاشل → حذف node_modules + القفل ثم إعادة install.",
      "Mismatch Node → استخدم nvm ونسخة LTS."],
    tips:["اقرأ scripts بدقة — أمر التشغيل يختلف حسب الأداة."]
  },
];

// ======= بناء القائمة والبطاقات =======
const nav = document.getElementById('nav');
const main = document.getElementById('main');

function renderNav(){
  const sec = document.createElement('div');
  sec.className='sec';
  steps.forEach((s,i)=>{
    const a = document.createElement('a');
    a.href = `#${s.id}`;
    a.className = 'link'+(i===0?' active':'');
    a.dataset.id = s.id;
    a.innerHTML = `<span>${s.icon}</span><span>${i+1}. ${s.title}</span>`;
    a.addEventListener('click', e=>{
      document.querySelectorAll('.link').forEach(x=>x.classList.remove('active'));
      a.classList.add('active');
      document.getElementById(s.id)?.scrollIntoView({behavior:'smooth',block:'start'});
    });
    sec.appendChild(a);
  });
  nav.appendChild(sec);
}

function confetti(){
  const box = document.getElementById('confetti');
  for(let i=0;i<40;i++){
    const el = document.createElement('div');
    el.className='piece';
    el.style.left = (Math.random()*100)+'vw';
    el.style.top = '-10vh';
    el.style.transform = `translateY(0) rotate(${Math.random()*180}deg)`;
    el.style.animationDelay = (Math.random()*300)+'ms';
    el.style.background = Math.random()>.5? 'linear-gradient(180deg, var(--accent2), var(--accent))':'linear-gradient(180deg, #ffd166, #fb7185)';
    box.appendChild(el);
    setTimeout(()=> el.remove(), 1600);
  }
}

function simulateConsole(el, lines){
  el.innerHTML = '';
  const flash = document.createElement('div');
  flash.className='flash';
  el.appendChild(flash);
  let i=0;
  function typeLine(){
    if(i>=lines.length){ confetti(); return; }
    const p = document.createElement('div');
    p.textContent = '➜ ' + lines[i];
    el.appendChild(p);
    el.scrollTop = el.scrollHeight;
    i++;
    setTimeout(typeLine, 280);
  }
  typeLine();
}

function renderSteps(){
  steps.forEach((s, idx)=>{
    const card = document.createElement('section');
    card.className='card';
    card.id = s.id;
    card.innerHTML = `
      <div class="hdr">
        <div class="stepN">${idx+1}</div>
        <div style="font-weight:700">${s.icon} ${s.title}</div>
        <span class="badge">${s.badge}</span>
      </div>
      <div class="body">
        <div class="panel">
          <h4>الـ Prompt اللي تقولها للمساعد</h4>
          <p style="font-size:15px">${s.prompt}</p>
          <div class="btns">
            <button class="btn" data-act="simulate">شغّل محاكاة الرد 💬</button>
            <button class="btn alt" data-act="explain">وش يصير خلف الكواليس 🔍</button>
          </div>
          <div class="progress" style="margin-top:12px"><div class="bar"></div></div>
          <div class="tip" style="margin-top:12px;display:${s.tips?.length? 'flex':'none'}">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v3M5.6 6.6l2.1 2.1M3 12h3m12 0h3M6.6 18.4l2.1-2.1M12 18v3m5.3-12.3-2.1 2.1" stroke="#22d3ee" stroke-width="2" stroke-linecap="round"/></svg>
            <div>${(s.tips||[]).join('<br/>')}</div>
          </div>
        </div>
        <div class="panel">
          <h4>محاكاة التيرمنال (شكل بس للتوضيح)</h4>
          <div class="console"></div>
        </div>
      </div>
    `;

    // أزرار الأحداث
    const btnSim = card.querySelector('[data-act="simulate"]');
    const btnExp = card.querySelector('[data-act="explain"]');
    const cons = card.querySelector('.console');
    const bar = card.querySelector('.bar');

    btnSim.addEventListener('click',()=>{
      const lines = [
        'فهمت البرومبت — أجهّز الخطوة...',
        'أطبّق الإجراء المناسب...',
        'تم — انتقل للخطوة التالية واستمتع ✨'
      ];
      simulateConsole(cons, lines);
      bar.style.width = '100%';
      setTimeout(()=> bar.style.width = '0%', 1400);
    });

    btnExp.addEventListener('click',()=>{
      const lines = s.behind.map((l,i)=> `${i+1}. ${l}`);
      simulateConsole(cons, lines);
      bar.style.width = '70%';
      setTimeout(()=> bar.style.width = '0%', 1600);
    });

    main.appendChild(card);
  });
}

renderNav();
renderSteps();

// مراقبة القسم النشط لتفعيل القائمة
const io = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      document.querySelectorAll('.link').forEach(a=>{
        a.classList.toggle('active', a.dataset.id===e.target.id);
      })
    }
  })
},{rootMargin:'-50% 0px -45% 0px', threshold:[0,1]});

document.querySelectorAll('section.card').forEach(sec=> io.observe(sec));
</script>
</body>
</html>
